name: 'Python Quality Checks'
description: 'Run code quality checks (ruff format, ruff lint, mypy)'
author: 'provide.io llc'

inputs:
  source-paths:
    description: 'Source paths to check'
    required: false
    default: 'src/ tests/'

runs:
  using: 'composite'
  steps:
    - name: ğŸ“¥ Checkout ci-tooling
      uses: actions/checkout@v4
      with:
        repository: provide-io/ci-tooling
        ref: main
        path: .ci-tooling

    - name: ğŸ¨ Check formatting with Ruff
      shell: bash
      run: |
        source ./workenv/bin/activate
        .ci-tooling/scripts/quality/run-ruff-format.sh "${{ inputs.source-paths }}" true

    - name: ğŸ” Lint with Ruff
      shell: bash
      run: |
        source ./workenv/bin/activate
        .ci-tooling/scripts/quality/run-ruff-lint.sh "${{ inputs.source-paths }}" false

    - name: ğŸ”’ Type check with MyPy
      shell: bash
      run: |
        source ./workenv/bin/activate
        .ci-tooling/scripts/quality/run-mypy.sh src/ false || true

branding:
  icon: 'check-circle'
  color: 'green'
